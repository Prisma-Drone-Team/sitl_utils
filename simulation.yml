session_name: simulation
socket_name: drone
environment:
pre_window: 
windows:
- window_name: px4
  layout: tiled
  panes:
    - shell_command:            
        - cd ~/PX4-Autopilot
        - make px4_sitl gz_x500_depth
    - shell_command:
        - sleep 5           
        - MicroXRCEAgent udp4 -p 8888
    - shell_command:
        - sleep 5           
        - ros2 run ros_gz_bridge parameter_bridge /camera_info@sensor_msgs/msg/CameraInfo@gz.msgs.CameraInfo # /odom@nav_msgs/msg/Odometry@gz.msgs.OdometryWithCovariance
    - shell_command:
        - sleep 5  
        - ros2 run ros_gz_image image_bridge /camera /depth_camera
    - shell_command:
        - sleep 15
        - cd ros2_ws && source install/setup.bash
        - LD_PRELOAD=/usr/lib/x86_64-linux-gnu/liboctomap.so ros2 run rviz2 rviz2
- window_name: rtabmap
  layout: tiled
  panes:
    - shell_command:
        - sleep 25
        - cd ~/ros2_ws && source install/setup.bash
        - ros2 launch trajectory_planner tf_static_sim.launch.py
    - shell_command:
        - sleep 25
        - cd ~/ros2_ws && source install/setup.bash
        - ros2 launch trajectory_planner rtabmap_sim.launch.py
    - shell_command:
        - sleep 25
        - cd ~/ros2_ws && source install/setup.bash
        - ros2 launch mavros px4.launch fcu_url:=udp://:14540@localhost:14557
        
#- ros2 run ros_gz_bridge image_bridge /camera /depth_camera
